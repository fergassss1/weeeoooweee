<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>weeeoooweee</title>
    <style>
        @font-face {
            font-family: 'Cal Sans UI';
            src: url('https://raw.githubusercontent.com/calcom/sans-ui/main/fonts/webfonts/CalSansUI-SemiBold.woff2') format('woff2');
        }

        body {
            margin: 0;
            overflow: hidden;
            background-color: #ffffff;
            font-family: 'Cal Sans UI', sans-serif;
            touch-action: none; /* Prevents scrolling while interacting with objects */
        }

        canvas { display: block; }
    </style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>

<script>
    const { Engine, Render, Runner, Bodies, Composite, Mouse, MouseConstraint, Body } = Matter;

    const engine = Engine.create();
    engine.gravity.y = 0; // Zero gravity for floating

    const render = Render.create({
        element: document.body,
        engine: engine,
        options: {
            width: window.innerWidth,
            height: window.innerHeight,
            wireframes: false,
            background: 'transparent',
            pixelRatio: window.devicePixelRatio
        }
    });

    // 1. Invisible Wall Boundaries (keeps them inside the screen)
    const wallOptions = { 
        isStatic: true, 
        render: { visible: false },
        restitution: 1 // Makes objects bounce off walls without losing speed
    };
    
    const updateWalls = () => {
        Composite.remove(engine.world, engine.world.bodies.filter(b => b.label === 'wall'));
        const walls = [
            Bodies.rectangle(window.innerWidth/2, -50, window.innerWidth, 100, { ...wallOptions, label: 'wall' }),
            Bodies.rectangle(window.innerWidth/2, window.innerHeight + 50, window.innerWidth, 100, { ...wallOptions, label: 'wall' }),
            Bodies.rectangle(-50, window.innerHeight/2, 100, window.innerHeight, { ...wallOptions, label: 'wall' }),
            Bodies.rectangle(window.innerWidth + 50, window.innerHeight/2, 100, window.innerHeight, { ...wallOptions, label: 'wall' })
        ];
        Composite.add(engine.world, walls);
    };
    updateWalls();

    // 2. Icon Asset
    const iconImg = new Image();
    iconImg.src = 'assets/symbol.svg'; 

    // 3. Create "Floating" Characters
    const createObject = (x, y, content, isSymbol = false) => {
        return Bodies.circle(x, y, 40, {
            restitution: 1,      // Perfectly bouncy
            frictionAir: 0,      // No air resistance (keep moving forever)
            friction: 0,
            render: {
                visible: false,  // Hide the physics circle shape
                customData: { content, isSymbol }
            }
        });
    };

    const objects = [
        createObject(window.innerWidth * 0.2, 300, 'f'),
        createObject(window.innerWidth * 0.4, 300, 'e'),
        createObject(window.innerWidth * 0.6, 300, 'r'),
        createObject(window.innerWidth * 0.8, 300, '', true)
    ];

    Composite.add(engine.world, objects);

    // 4. Interaction (Mouse & Touch)
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
        constraint: {
            stiffness: 0.2,
            render: { visible: false }
        }
    });
    Composite.add(engine.world, mouseConstraint);

    // Give them a starting push
    objects.forEach(obj => {
        Body.setVelocity(obj, { 
            x: (Math.random() - 0.5) * 6, 
            y: (Math.random() - 0.5) * 6 
        });
    });

    // 5. Custom Drawing Loop
    (function renderLoop() {
        window.requestAnimationFrame(renderLoop);
        Engine.update(engine);
        Render.world(render);

        const ctx = render.context;
        objects.forEach(obj => {
            const { x, y } = obj.position;
            const { content, isSymbol } = obj.render.customData;

            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(obj.angle);

            if (isSymbol) {
                const size = 80;
                if (iconImg.complete) {
                    ctx.drawImage(iconImg, -size/2, -size/2, size, size);
                }
            } else {
                ctx.font = '600 80px "Cal Sans UI"';
                ctx.fillStyle = '#000';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(content, 0, 0);
            }
            ctx.restore();
        });
    })();

    // Resize Handler
    window.addEventListener('resize', () => {
        render.canvas.width = window.innerWidth;
        render.canvas.height = window.innerHeight;
        updateWalls();
    });
</script>
</body>
</html>
