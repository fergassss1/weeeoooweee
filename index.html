<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>weeeoooweee</title>
    <style>
        @font-face {
            font-family: 'Cal Sans UI';
            /* Direct link to the raw font file for GitHub Pages compatibility */
            src: url('https://raw.githubusercontent.com/calcom/sans-ui/main/fonts/webfonts/CalSansUI-SemiBold.woff2') format('woff2');
        }

        body {
            margin: 0;
            overflow: hidden;
            background-color: #ffffff;
            font-family: 'Cal Sans UI', sans-serif;
        }

        canvas { display: block; }
    </style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>

<script>
    const { Engine, Render, Runner, Bodies, Composite, Mouse, MouseConstraint, Body } = Matter;

    const engine = Engine.create();
    engine.gravity.y = 0; // Floating effect

    const render = Render.create({
        element: document.body,
        engine: engine,
        options: {
            width: window.innerWidth,
            height: window.innerHeight,
            wireframes: false,
            background: 'transparent',
            pixelRatio: window.devicePixelRatio // Sharpness on high-res screens
        }
    });

    // 1. Invisible Walls
    const wallOptions = { isStatic: true, render: { visible: false } };
    const walls = [
        Bodies.rectangle(window.innerWidth/2, -50, window.innerWidth, 100, wallOptions),
        Bodies.rectangle(window.innerWidth/2, window.innerHeight + 50, window.innerWidth, 100, wallOptions),
        Bodies.rectangle(-50, window.innerHeight/2, 100, window.innerHeight, wallOptions),
        Bodies.rectangle(window.innerWidth + 50, window.innerHeight/2, 100, window.innerHeight, wallOptions)
    ];
    Composite.add(engine.world, walls);

    // 2. Asset Loading (Icon)
    const iconImg = new Image();
    iconImg.src = 'assets/symbol.svg'; 

    // 3. Create the "fer" + "symbol" objects
    const createObject = (x, y, content, color, isSymbol = false) => {
        return Bodies.circle(x, y, 65, {
            restitution: 0.9, 
            frictionAir: 0.01,
            chamfer: { radius: 30 }, // Makes it feel like a soft blob
            render: {
                fillStyle: color,
                customData: { content, isSymbol }
            }
        });
    };

    const objects = [
        createObject(200, 300, 'f', '#C3E7FF'),
        createObject(400, 300, 'e', '#F2B8B5'),
        createObject(600, 300, 'r', '#D2E3FC'),
        createObject(800, 300, '', '#CEEAD6', true) // The Symbol
    ];

    Composite.add(engine.world, objects);

    // 4. Interaction
    const mouseConstraint = MouseConstraint.create(engine, {
        mouse: Mouse.create(render.canvas),
        constraint: { stiffness: 0.2, render: { visible: false } }
    });
    Composite.add(engine.world, mouseConstraint);

    // Initial movement push
    objects.forEach(obj => {
        Body.setVelocity(obj, { x: (Math.random() - 0.5) * 8, y: (Math.random() - 0.5) * 8 });
    });

    // 5. Custom Drawing Loop
    (function renderLoop() {
        window.requestAnimationFrame(renderLoop);
        Engine.update(engine);
        Render.world(render);

        const ctx = render.context;
        objects.forEach(obj => {
            const { x, y } = obj.position;
            const { content, isSymbol } = obj.render.customData;

            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(obj.angle);

            if (isSymbol) {
                // Draw your SVG icon
                const size = 60;
                ctx.drawImage(iconImg, -size/2, -size/2, size, size);
            } else {
                // Draw the Cal Sans text
                ctx.font = '600 60px "Cal Sans UI"';
                ctx.fillStyle = '#000';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(content, 0, 0);
            }
            ctx.restore();
        });
    })();

    Runner.run(Runner.create(), engine);

    // Handle Resize
    window.addEventListener('resize', () => {
        render.canvas.width = window.innerWidth;
        render.canvas.height = window.innerHeight;
    });
</script>
</body>
</html>
